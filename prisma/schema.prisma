generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  Manager
  User
}

model User {
  id        Int    @id @default(autoincrement())
  email     String @unique
  password  String
  firstName String @map("first_name")
  lastName  String @map("last_name")
  role      Role   @default(User)

  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp(0)

  Transactions Transaction[]

  @@map("users")
}

model Car {
  id          Int     @id @default(autoincrement())
  licenseHead String  @map("license_head") @db.VarChar(3)
  licenseBody Int     @map("license_body")
  city        String
  model       String
  color       String?
  note        String?
  insurance   String?
  descrition  String?
  year        String?

  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp(0)

  role Status @default(Ready)
  type Type

  image String?

  Transactions Transaction[]

  @@map("cars")
}

enum Status {
  Maintenace
  Ready
  Defect
  Busy
}

enum Type {
  MPV
  SUV
  SEDAN
  VAN
  PICKUP
}

model Transaction {
  id         Int     @id @default(autoincrement())
  descrition String?

  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp(0)

  user   User @relation(fields: [userId], references: [id])
  userId Int  @map("user_id")

  car   Car @relation(fields: [carId], references: [id])
  carId Int @map("car_id")
}
